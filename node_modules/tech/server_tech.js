var db = require('db');
var config = require('config');

var stdin = process.openStdin();

/**
 * Module for special commands, which can be entered
 * directly while the server is running
 */

module.exports = stdin.addListener("data", function (d) {
    var s = d.toString().trim();
        switch (s) {
            case "DELETE DB":
                db.deleteAll();
                console.log("DB is deleted");
                break;
            default:
                console.log("No such command");
                break;
        }
        var s1 = s.substr(s.indexOf(' ') + 1, s.length - s.indexOf(' ')).trim();
        switch (s.substr(0, s.indexOf(' '))) {
            case "SECRET":
                config.secret(s1);
                break;
            case "PATH":
                config.path(s1);
                break;
            case "MODE":
                if (s1 == 'develop' || s1 == 'production')
                    config.mode(s1);
                else
                    console.log("No such command");
                break;
            default:
                console.log("No such command");
                break;
        }
});